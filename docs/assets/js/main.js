"use strict";const btn=document.querySelector(".js-btn-search"),inputUser=document.querySelector(".js-btn-serie");let series=[];const favorites=[],getSeriesFromLocalStorage=()=>JSON.parse(localStorage.getItem("series")),setSeriesIntoLocalStorage=()=>{localStorage.setItem("series",JSON.stringify(series))},getDatafromServer=e=>{e.preventDefault();const s=`http://api.tvmaze.com/search/shows?q=${inputUser.value}`;return fetch(s).then(e=>e.json()).then(e=>{console.log(e),e=formatData(e),saveDataInSeries(e),paintSeries(),listenSeries(),getSeriesFromLocalStorage()})},formatData=e=>{const s=[];for(let t=0;t<e.length;t+=1)s.push({image:e[t].show.image.medium,name:e[t].show.name});return console.log("Format JSON data and return it as array >>> Return",s),s},saveDataInSeries=e=>{series=e,console.log("Save data in series array >> series",series)},paintSeries=()=>{const e=document.querySelector(".js-list");let s="";for(let e=0;e<series.length;e++)s+=`<li class="series__element ${getFavoriteClassName(e)} js-serie" data-index="${e}">`,s+=`<img  class="series__image" src="${series[e].image}" alt="">`,s+=`<p class="series__name">${series[e].name}</p>`,s+="</li>";e.innerHTML=s,console.log("Paint series form `series` array into DOM >>> series:",series,"Favorites:",favorites)},getFavoriteClassName=e=>isFavoriteSerie(e)?"series__item--favorite":"",listenSeries=()=>{console.log("listen click on new series DOM elements");const e=document.querySelectorAll(".js-serie");for(const s of e)s.addEventListener("click",handleClick)},handleClick=e=>{console.log("Handle click on a serie DOM element");const s=getClickedSerie(e);isFavoriteSerie(s)?removeFavorite(s):addFavorite(s),paintSeries(),listenSeries()},getClickedSerie=e=>{const s=e.currentTarget,t=parseInt(s.dataset.index);return console.log("Get clicked palette from event and return the clicked palette index >>> Clicked palette:",t),t},isFavoriteSerie=e=>{return favorites.indexOf(series[e])>=0?(console.log(`check if serieIndex ${e} it is favorite >>>`,!0),!0):(console.log(`Check if serieIndex ${e} it is not favorite >>>`,!1),!1)},addFavorite=e=>{favorites.push(series[e]),console.log("Add paletteIndex to `favorites` array >>> Favorites:",favorites)},removeFavorite=e=>{const s=favorites.indexOf(series[e]);favorites.splice(s,1),console.log("Remove serieIndex from `favorites` array >>> Favorites:",favorites)};btn.addEventListener("click",getDatafromServer);